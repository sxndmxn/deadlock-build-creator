<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadlock Build Guide</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Deadlock Build Guide</h1>
            <div class="hero-select-wrapper" id="hero-select-wrapper">
                <div class="hero-select-trigger" id="hero-select-trigger">
                    <span class="hero-select-text">Select a hero...</span>
                    <span class="hero-select-arrow">▼</span>
                </div>
                <div class="hero-select-dropdown hidden" id="hero-select-dropdown"></div>
            </div>
            <div class="rank-filter-wrapper" id="rank-filter-wrapper">
                <div class="rank-filter-trigger" id="rank-filter-trigger">
                    <span class="rank-filter-text">All Ranks</span>
                    <span class="rank-filter-arrow">▼</span>
                </div>
                <div class="rank-filter-dropdown hidden" id="rank-filter-dropdown"></div>
            </div>
        </header>

        <main class="main-content">
            <div class="loading-overlay" id="loading">
                <div class="spinner"></div>
                <p>Loading item data...</p>
            </div>

            <div class="stats-panel hidden" id="stats-panel">
                <div class="stat-chip">
                    <span class="stat-chip-label">Total Matches</span>
                    <span class="stat-chip-value" id="total-matches">-</span>
                </div>
                <div class="stat-chip">
                    <span class="stat-chip-label">Hero Win Rate</span>
                    <span class="stat-chip-value" id="hero-winrate">-</span>
                </div>
                <div class="stat-chip">
                    <span class="stat-chip-label">Items Tracked</span>
                    <span class="stat-chip-value" id="items-tracked">-</span>
                </div>
                <div class="stat-chip" id="powerspike-chip">
                    <span class="stat-chip-label">Powerspike</span>
                    <span class="stat-chip-value" id="hero-powerspike">-</span>
                </div>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="build">Build Path</button>
                    <button class="view-btn" data-view="tier">By Tier</button>
                    <button class="view-btn" data-view="phase">By Phase</button>
                    <button class="view-btn" data-view="abilities">Abilities</button>
                    <button class="view-btn" data-view="synergies">Synergies</button>
                </div>
                <div class="sort-toggle">
                    <span class="sort-label">Sort:</span>
                    <button class="sort-btn active" data-sort="winrate">Win Rate</button>
                    <button class="sort-btn" data-sort="popularity">Popularity</button>
                    <button class="sort-btn" data-sort="buy_order">Buy Order</button>
                </div>
            </div>

            <div class="tiers-container hidden" id="tiers-container">
                <div class="tier-column" data-tier="1">
                    <h2 class="tier-header">Tier 1 <span class="tier-cost">(800)</span></h2>
                    <div class="items-list" id="tier-1-items"></div>
                </div>
                <div class="tier-column" data-tier="2">
                    <h2 class="tier-header">Tier 2 <span class="tier-cost">(1,600)</span></h2>
                    <div class="items-list" id="tier-2-items"></div>
                </div>
                <div class="tier-column" data-tier="3">
                    <h2 class="tier-header">Tier 3 <span class="tier-cost">(3,200)</span></h2>
                    <div class="items-list" id="tier-3-items"></div>
                </div>
                <div class="tier-column" data-tier="4">
                    <h2 class="tier-header">Tier 4 <span class="tier-cost">(6,400)</span></h2>
                    <div class="items-list" id="tier-4-items"></div>
                </div>
            </div>

            <div class="phases-container hidden" id="phases-container">
                <div class="phase-column" data-phase="0-5">
                    <h2 class="phase-header">0-5 min</h2>
                    <div class="items-list" id="phase-0-5-items"></div>
                </div>
                <div class="phase-column" data-phase="5-10">
                    <h2 class="phase-header">5-10 min</h2>
                    <div class="items-list" id="phase-5-10-items"></div>
                </div>
                <div class="phase-column" data-phase="10-20">
                    <h2 class="phase-header">10-20 min</h2>
                    <div class="items-list" id="phase-10-20-items"></div>
                </div>
                <div class="phase-column" data-phase="20-30">
                    <h2 class="phase-header">20-30 min</h2>
                    <div class="items-list" id="phase-20-30-items"></div>
                </div>
                <div class="phase-column" data-phase="30+">
                    <h2 class="phase-header">30+ min</h2>
                    <div class="items-list" id="phase-30-plus-items"></div>
                </div>
            </div>

            <!-- Build Path View -->
            <div class="build-path-container" id="build-path-container">
                <div class="build-path-header">
                    <h2>Recommended Build</h2>
                    <p class="build-path-description">Best items for each game phase, sorted by phase-specific win rate.</p>
                </div>

                <!-- Soul-based Build Guide -->
                <div class="build-phases" id="build-phases">
                    <div class="build-phase" data-phase="0-5k">
                        <div class="phase-header">
                            <h3>0-5k Souls</h3>
                            <p class="phase-desc">Starting items</p>
                        </div>
                        <div class="phase-items" id="phase-0-5k-items"></div>
                    </div>
                    <div class="build-phase" data-phase="5-10k">
                        <div class="phase-header">
                            <h3>5-10k Souls</h3>
                            <p class="phase-desc">First power spike</p>
                        </div>
                        <div class="phase-items" id="phase-5-10k-items"></div>
                    </div>
                    <div class="build-phase" data-phase="10-20k">
                        <div class="phase-header">
                            <h3>10-20k Souls</h3>
                            <p class="phase-desc">Mid game core</p>
                        </div>
                        <div class="phase-items" id="phase-10-20k-items"></div>
                    </div>
                    <div class="build-phase" data-phase="20k+">
                        <div class="phase-header">
                            <h3>20k+ Souls</h3>
                            <p class="phase-desc">Late game</p>
                        </div>
                        <div class="phase-items" id="phase-20k-items"></div>
                    </div>
                </div>

                <!-- Upgrade Chains (collapsed by default) -->
                <details class="upgrade-chains-details">
                    <summary>View Upgrade Chains</summary>
                    <div class="upgrade-chains-section">
                        <div class="upgrade-chains" id="upgrade-chains"></div>
                    </div>
                </details>
            </div>

            <!-- Abilities View -->
            <div class="abilities-container hidden" id="abilities-container">
                <div class="abilities-header">
                    <h2>Ability Build Orders</h2>
                    <p class="abilities-description">Most popular and highest win rate ability upgrade sequences.</p>
                </div>
                <div class="abilities-loading hidden" id="abilities-loading">
                    <div class="spinner"></div>
                    <p>Loading ability data...</p>
                </div>
                <div class="ability-sequences" id="ability-sequences"></div>
            </div>

            <!-- Synergies View -->
            <div class="synergies-container hidden" id="synergies-container">
                <div class="synergies-header">
                    <h2>Item Synergies</h2>
                    <p class="synergies-description">Items that work well together, based on win rate when purchased in the same game.</p>
                </div>
                <div class="synergies-loading hidden" id="synergies-loading">
                    <div class="spinner"></div>
                    <p>Loading synergy data...</p>
                </div>
                <div class="synergy-pairs" id="synergy-pairs"></div>
            </div>

            <!-- Purchase Timeline -->
            <section class="timeline-section hidden" id="timeline-section">
                <div class="timeline-header">
                    <h2>Purchase Timeline</h2>
                    <button id="auto-fill-build" class="btn btn-primary">Auto-fill Build</button>
                </div>
                <div class="timeline-container">
                    <div class="timeline-axis" id="timeline-axis"></div>
                    <div class="timeline-items" id="timeline-items"></div>
                </div>
            </section>
        </main>

        <footer class="build-section">
            <div class="build-header">
                <h2>Your Build</h2>
                <div class="build-actions">
                    <button id="clear-build" class="btn btn-secondary">Clear</button>
                    <button id="export-build" class="btn btn-primary">Export</button>
                </div>
            </div>
            <div class="build-slots" id="build-slots">
                <div class="build-slot empty" data-slot="0"></div>
                <div class="build-slot empty" data-slot="1"></div>
                <div class="build-slot empty" data-slot="2"></div>
                <div class="build-slot empty" data-slot="3"></div>
                <div class="build-slot empty" data-slot="4"></div>
                <div class="build-slot empty" data-slot="5"></div>
                <div class="build-slot empty" data-slot="6"></div>
                <div class="build-slot empty" data-slot="7"></div>
                <div class="build-slot empty" data-slot="8"></div>
                <div class="build-slot empty" data-slot="9"></div>
                <div class="build-slot empty" data-slot="10"></div>
                <div class="build-slot empty" data-slot="11"></div>
            </div>
        </footer>
    </div>

    <!-- Item detail modal -->
    <div class="modal" id="item-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">&times;</button>
            <h3 id="modal-item-name">Item Name</h3>
            <div class="modal-stats" id="modal-stats"></div>
        </div>
    </div>

    <!-- Toast notification -->
    <div class="toast" id="toast"></div>

    <script src="js/api.js"></script>
    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
